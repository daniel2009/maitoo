<%@ page language="java" contentType="text/html; charset=UTF-8"	pageEncoding="UTF-8"%><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>print</title><link rel="shortcut icon" href="../img/favicon.ico" /></head><body>	<div class="print" style="width=650px;height=978px">		<div>			<!-- <table  id="print_table1" style="BORDER-BOTTOM: 1px"> -->			<TABLE align=center border=0  bordercolor=#000000 cellSpacing=0 cellPadding=16 style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 2px solid ;width:450px;"><tr><td  width=50% style="text-align:center;"><div style="float: center;margin-left: 2px;margin-right: 1px; margin-top: 4px;margin-bottom:0px; width: 100%;">							<div>								<img id="print_logo" src="" style="height:75px;" />							</div>						</div>								<span style="font-size:12px" id="print_site_url"></span>			</td><td  width=50% style="text-align:center;"><div style="float: center;margin-left: 2px;margin-right: 1px; margin-top: 2px;margin-bottom:0px; width: 100%;"><img						name="barcode" style="height:75px"						src="${pageContext.request.contextPath }/barcode4j/generate?msg=${param.orderId }&type=code39&height=12" />						<!--  src="${pageContext.request.contextPath }/barcode/generate?code=${param.orderId }" />-->												</div>			<!-- <span style="font-size:12px" id="u_orderId"></span>	 -->		</td></tr>						</table>				</div>	<div style="text-align:center;">					<TABLE align=center border=0  bordercolor=#000000 cellSpacing=0 cellPadding=16 style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 1px solid ;width:450px;">			<tr ><td  width=50% valign=top style="text-align:left;height:150px">																		<span name="" style="font-size:14pt;">寄件人信息：</span><br>						<span  style="font-size:12pt;">姓名：</span><span name="send_name" id="send_name" style="font-size:12pt;"></span><br>						<span  style="font-size:12pt;">电话：</span><span name="send_phone" id="send_phone" style="font-size:12pt;"></span><br>						<span  style="font-size:12pt;">地址：</span><span name="send_address2" id="send_address2" style="font-size:12pt;"></span>																								</td><td  width=50% valign=top style="text-align:left;height:150px">																		<span name="" style="font-size:14pt;">收件人信息：</span><br>						<span  style="font-size:12pt;">姓名：</span><span name="rev_name" id="rev_name" style="font-size:12pt;"></span><br>						<span  style="font-size:12pt;">电话：</span><span name="rev_phone" id="rev_phone" style="font-size:12pt;"></span><br>						<span  style="font-size:12pt;">地址：</span><span name="rev_cstreet_address" id="rev_cstreet_address" style="font-size:12pt;"></span>						<span name="rev_address2" id="rev_address2" style="font-size:12pt;"></span><br>						<span style="font-size:12pt;">邮编：</span><span name="rev_zipcode" id="rev_address2" style="font-size:12pt;"></span>																								</td></tr><tr><td  colspan=2 style="text-align:left;"><span name="" style="font-size:14pt;">品牌/详情/数量：</span>																		</td></tr>			</table>				</div>	<div style="text-align:left;">					<TABLE align=center valign=top border=0  bordercolor=#000000 cellSpacing=0 cellPadding=16 style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 1px solid ;width:450px;"><tr><td  width=50% valign=top style="text-align:left;height:150px">		<span id="commudity_all" style="font-size:12pt;align:left" ></span>																</td></tr>			</table>				</div>		<div style="text-align:center;">					<TABLE align=center border=0  bordercolor=#000000 cellSpacing=0 cellPadding=16 style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 1px solid ;width:450px;"><tr><td  width=50% valign=top style="text-align:left;"><span  style="font-size:14pt;">重量：</span><span id="table_weight1" style="font-size:12pt;"></span><br><span  style="font-size:14pt;">保险：</span><span id="table_prenum1" style="font-size:12pt;"></span><br>																		</td><td  width=50% valign=top style="text-align:left;height:150px"><span style="font-size:14pt;">备注：</span><br><span id="table_remark" style="font-size:12pt;"></span>																		</td></tr>			</table>				</div>	<div style="text-align:center;">					<TABLE align=center border=0  bordercolor=#000000 cellSpacing=0 cellPadding=16 style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 1px solid ;width:450px;"><tr><td  colspan=2 style="text-align:left;"><span name="warehouseAddress" style="font-size:10pt;">公司地址：</span><span id="warehouseAddress" style="font-size:8pt;"></span><br>				</td></tr><tr><td  width=50% valign=top style="text-align:left;"><span  style="font-size:10pt;">联系电话：</span><span id="contact_phone" style="font-size:8pt;"></span>																		</td><td  width=50% valign=top style="text-align:left;"><span name="" style="font-size:10pt;">日期：</span><span id="create_date" style="font-size:8pt;"></span><br>																		</td></tr>						</table>		</div></div>		<!-- <div>			<table border=1 id="print_table1">				<tr height="100px">					<td width=35%>						<div							style="float: left;margin-left: 3px;text-align: center;width:98%;">							<div>								<img src="../img/index/logo.png" /> <span>#</span>							</div>						</div></td>					<td width=40% style="text-align: center;"><img name="barcode"						style="width:98%; height:60%;"						src="${pageContext.request.contextPath }/barcode/generate?code=${param.orderId }" />						<span name="order_id" style="font-size:14pt;">&nbsp;</span></td>					<td width=25% style="text-align: center;"><span						style="font-size: 12pt;">626-898-7996 美国</span> <br /> <span						style="font-size: 12pt;">189-1885-3038 中国</span></td>				</tr>			</table> 		</div> -->		<div id="param_div" style="display: none;">		<input type="hidden" value="${param.id }" name="oid" /> <input			type="hidden"			value="${pageContext.request.contextPath }/barcode/generate?code="			name="barcodeimg" />	</div>	<input type="hidden" value="${param.orderId }" name="orderId_or" /></body><script type="text/javascript">	//kai 20150911-1 modify	//js获取项目根路径，如： http://localhost:8083/uimcardprj	base_url_set_has_sub = true;	function getRootPath() {		// 获取当前网址，如： http://localhost:8083/uimcardprj/share/meun.jsp		var curWwwPath = window.document.location.href;		// 获取主机地址之后的目录，如： uimcardprj/share/meun.jsp		var pathName = window.document.location.pathname;		var pos = curWwwPath.indexOf(pathName);		// 获取主机地址，如： http://localhost:8083		var localhostPaht = curWwwPath.substring(0, pos);		// 获取带"/"的项目名，如：/uimcardprj		var projectName = pathName.substring(0,				pathName.substr(1).indexOf('/') + 1);		if (base_url_set_has_sub == true) {			return (localhostPaht + projectName);		} else {			return localhostPaht;		}	}		function removenull(str)	{	    if((str=="")||(str==null)||(str=="null")||(str=="undefined"))	    {	    	return "";	    }	    else	    {	    	return str;	    }	}		$(document)			.ready(					function() {						function transformer(value) {							if (value == null || value == '') {								return "&nbsp;";							}							return value;						}						function string2int(value) {							if (value == null || value == '') {								return 0;							}							return parseInt(value);						}						$("#my_print_div")								.ready(										function() {											var id = $(":hidden[name='oid']").val();											var orderid= $(":hidden[name='orderId_or']").val();																																			$													.ajax({														type : "get",														url : admin_order_get_one_url,														data : {															"id" : id,															"oid":orderid														},														success : function(																response) {															var code = response.code;															if ("200" == code) {																var data = response.data;																var orderId = data.orderId;																if (orderId == null																		|| orderId == '') {																	orderId = transformer(id);																}																var toAddress = "";																if(removenull(data.cProvince)!="")																{																toAddress += transformer(data.cProvince)																		+ "&nbsp;";																}																if(removenull(data.cCity)!="")																{																toAddress += transformer(data.cCity)																		+ "&nbsp;";																}																toAddress += transformer(data.cDistrict);																	//	+ "&nbsp;/";																//toAddress += transformer(data.cStreetAddress);																																$("#rev_cstreet_address").html(toAddress);																$("#rev_address2").html(data.cStreetAddress);																$("#rev_zipcode").html(data.cZipCode);																																$("#rev_phone").html(data.cPhone);																$("#rev_name").html(data.cName);																																																																													//$("#print_table1 div[name='to_address']").html(toAddress);																var cAddress1 = "";																cAddress1 += transformer(data.cProvince)																		+ " ";																cAddress1 += transformer(data.cCity)																		+ " ";																cAddress1 += transformer(data.cDistrict)																		+ " ";																$("#u_orderId")																		.html(																				orderId);																																//kai 20150918 如果是代理会员，取地址要取自地址表																if ((data.user != null)																		&& (data.user.type == "5")) {																	//alert(transformer(data.senduserphone));																	$("#send_phone").html(																					transformer(data.senduserphone));																	$("#send_address2").html(																					transformer(data.senduserAddress));																} else if (data.user == null) {																	$("#send_phone").html(																					transformer(data.senduserphone));																	$("#send_address2").html(																					transformer(data.senduserAddress));																} else {																//alert(data.user.phone);																	$("#send_phone").html(																																						transformer(data.user.phone));																	$("#send_address2").html(																					transformer(data.user.address));																}																if($("#send_address2").html()=="")																{																$("#send_address2").html("&nbsp;");																}																																$("#create_date").html(																					transformer(data.createDate));																															//alert(data.userName);																//kai 20150918 修改，如果用户是代理会员，发件人数据取自运单表																if ((data.user != null)																		&& (data.user.type == "5")) {																	//alert(transformer(data.senduserName));																																		$(																			"#send_name")																			.html(																					transformer(data.senduserName));																} else if (data.user == null) {																	$(																			"#send_name")																			.html(																					transformer(data.senduserName));																} else {																																		if(removenull(data.senduserName)!="")																	{																		$("#send_name").html(transformer(data.senduserName));																	}																	else																	{																		$(																				"#send_name")																				.html(																						/*transformer(data.user.nickName)																								+ "/"																								+ transformer(data.user.realName)																								+ "#"																								+ transformer(data.user.id));*/																								transformer(data.user.realName));																	}																}																																var qty = 0;																var remark = transformer(data.remark)																		+ "";																$("#table_remark")																			.html(remark);																																				var str_remark = "";																var kk=1;																$																		.each(																				data.details,																				function() {																					/*str_remark += "品牌:"+removenull(this.brands)+"*详情:"+removenull(this.xiangqing)																							+ "*数量："																							+ this.quantity																							+ "<br/>";	*/																							str_remark += kk+"."+removenull(this.brands)+"/"+removenull(this.xiangqing)																							+ "*"																							+ this.quantity																							+ "<br/>";																																																																						kk=kk+1;																																						});																																				$("#commudity_all").html(str_remark);																																																																	if ((data.jwweight == null)																		|| (data.jwweight == "null")																		|| (data.jwweight == "0")																		|| (data.jwweight == "")) {																	$(																			"#table_weight1")																			.html(																					data.weight);																} else {																	$(																			"#table_weight1")																			.html(																					data.jwweight);																}																																																$(																		"#table_prenum1")																		.html(																				data.premium);																																$																		.ajax({																			async : false,																			type : "get",																			url : admin_warehouse_get_one_url,																			data : {																				"id" : data.warehouseId																			},																			success : function(																					response) {																				var code = response.code;																				if ("200" == code) {																					if (response.data != null																							|| response.data != "") {																																												$("#warehouseAddress").html(removenull(response.data.address)+"&nbsp;"+removenull(response.data.city)+"&nbsp;"+removenull(response.data.province)+"&nbsp;"+removenull(response.data.country)+"&nbsp;"+removenull(response.data.zipCode));																																																																	if ((response.data.printPhoneUSA == "")																								|| (response.data.printPhoneUSA == "null")																								|| (response.data.printPhoneUSA == null)																								|| (response.data.printPhoneUSA == "undefined")) {																							$("#contact_phone")																									.html(																											"");																																													} else {																							$("#contact_phone")																									.html( response.data.printPhoneUSA);																																													}																																											}																					//logo处理																					if ((response.data.printLogo == "")																							|| (response.data.printLogo == "null")																							|| (response.data.printLogo == "undefined")																							|| (response.data.printLogo == null)) {																					} else {																						$(																								"#print_logo")																								.attr(																										"src",																										getRootPath()																												+ response.data.printLogo);																																											}																					//window.print();																					getglobalargs();																				} else {																					alert("获取仓库信息失败!");																				}																			}																		});															} else {																alert("获取运单信息失败，无法打印运单！");															}															return false;														}													});										});					});	function getglobalargs() {		//var flags="print_logo_flag,print_order_hit,print_site_url";//获取logo图片,包裹提示,网站的url		var flags = "print_order_hit,print_site_url";//获取logo图片,包裹提示,网站的url		$.ajax({			type : "post",			url : admin_globalargs_getcontents_url,			data : {				"flags" : flags			},			success : function(response) {				var code = response.code;				if ("200" == code) {					if (response.data != null) {						/*if((response.data[0]=="")||(response.data[0]=="null")||(response.data[0]=="undefined")||(response.data[0]==null))						{													}						else						{														//$("#print_logo").attr("src",getRootPath()+response.data[0]);							//$("#print_logo2").attr("src",getRootPath()+response.data[0]);						}*/						if ((response.data[0] == "")								|| (response.data[0] == "null")								|| (response.data[0] == "undefined")								|| (response.data[0] == null)) {						} else {							$("#print_order_hit").html(response.data[0]);						}						if ((response.data[1] == "")								|| (response.data[1] == "null")								|| (response.data[1] == "undefined")								|| (response.data[1] == null)) {						} else {							$("#print_site_url").html(response.data[1]);							$("#print_site_url2").html(response.data[1]);						}					} else {					}				} else {				}				$(document).ready(function() {					setTimeout(window.print(), 2500);				});			}		});	}</script></html>