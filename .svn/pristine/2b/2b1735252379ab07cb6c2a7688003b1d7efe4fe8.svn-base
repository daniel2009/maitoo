<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%><html>	<head>	<link rel="shortcut icon" href="../img/favicon.ico" /> 	<script type="text/javascript" src="${pageContext.request.contextPath }/resources/scripts/usaarea.js"></script>	<script type="text/javascript" src="${pageContext.request.contextPath }/resources/scripts/usalocation.js"></script>	</head>	<body>		<div style="display: none;" id="tmpmsgdiv"></div>		<input type="hidden" name="userType" value="0" />		<input type="hidden" name="premiumratevalue" value="0" />		<input type="hidden" name="warehouseId" id="warehouseId" value=""/>		<div class="block"> 		<p class="block-heading" data-toggle="collapse"			data-target="#chart-container" style="font-size:20px">添加门店运单			<a href="#" id="a_back_msj_order_list_link">返回列表</a>			</p>		<div class="box_content">			<div class="content_title">添加门店运单</div>			<div class="content_text">				<input type="text" style="display: none;" id="weightRoundUpText" readonly>				<div class="tab-content" id="tab2">				<form action="" id="add_form" method="post" enctype="multipart/form-data">					<!-- <form action="#"  method="post"> -->						<label>							<h4>								运单收发用户信息：							</h4>						</label>						<table id="u5401">							<tr>								<td >									寄件人Email/RealName/Phone/QQ:									<input class="text-input old-input" type="text" name="key" />									<input id="searchBt" class="button" type="submit" value="查询" />									<a href="javascript:addUserDlg('')">添加寄件人</a>									<div id="u5402">										<table id="user_info_table">											<col width="7%" />											<col width="31%" />											<col width="31%" />											<col width="21%" />											<thead>												<tr>													<th>														&nbsp;													</th>													<th>														寄件人电话													</th>													<th>														真实姓名													</th>													<th>														账户余额													</th>												</tr>											</thead>											<tbody>											</tbody>										</table>									</div>																				<table id="sjdztable" class="table">											<thead>												<tr>													<th style="width:7%"></th><th style="width:15%">收货人</th><th style="width:18%">电话</th><th style="width:25%">国家/地区</th><th style="width:35%">详细地址</th><th style="width:10%">邮编</th>												</tr>											</thead>											<tfoot>												<tr>													<td colspan="8" align="right"><span>共</span><span id="trsize">0</span><span>条</span> <a id="first_page" href="1" name="to_page">首页</a> <span>|</span> <a id="pre_page" name="to_page">上一页</a><span> |</span> <input type="text" class="bor" size="2" /> <span>/</span><span id="tpsize">0</span><span>|</span> <a id="next_page" name="to_page">下一页</a> <span>|</span> <a id="last_page" name="to_page">未页</a></td>												</tr>											</tfoot>											<tbody>											</tbody>										</table>								</td>								<td>								<!-- <form action="" id="add_form" method="post" enctype="multipart/form-data"> -->									<div style="margin-left: 10px;">										<label style="display: inline;">											自定义单号：										</label>										<input name="orderId" class="text-input medium-input" placeholder="如无则留空" type="text" maxlength="40"/>										<hr/>										<label style="display: inline;">											寄件人手机号码：										</label>										<input name="from_user_name" class="text-input" type="text" maxlength="16" value="${param.username}"/>										<label style="display: inline;">											寄件人姓名：										</label>										<input name="from_user_real_name" class="text-input" type="text" maxlength="50" value="${param.realname}"/>										<hr/>										<label style="display: inline;">											收件人姓名：										</label>										<input name="cName" class="text-input" type="text" maxlength="16"/>										<hr />										<label style="display: inline;">											中国：										</label>											<input type="hidden" name="cUserId"/>											<input type="hidden" name="cProvince"/>											<input type="hidden" name="cCity"  />											<input type="hidden" name="cDistrict"  />											<input type="hidden" name="channelidname"  />																						<select id="loc_province" style="width:100px" ></select>											/											<select id="loc_city"style="width:100px"></select>											/											<select id="loc_town"style="width:100px"></select>											&nbsp;&nbsp;禁用											<input type="checkbox" name="use_pct" id="use_pct" value="">																						<br/>																					<!--<select style="width: 90px;" id="usa_province" class="text-input" name="cProvince">										</select>										/										<select style="width: 150px;" id="usa_city" class="text-input" name="cCity">										</select>										 <!--/										<select style="width: 100px;" id="loc_town" class="text-input" name="cDistrict">										</select> -->										<hr />										<label style="display: inline;">											详&nbsp;细&nbsp;地&nbsp;址：										</label>										<input type="text" name="cStreetAddress"											class="text-input medium-input" maxlength="36"/>										<hr />										<label style="display: inline;">											邮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;编：										</label>										<input type="text" name="cZipCode" class="text-input" maxlength="6" />										<hr />										<label style="display: inline;">											联&nbsp;系&nbsp;电&nbsp;话：										</label>										<input type="text" name="cPhone" class="text-input" maxlength="12"/>										 <hr/>										<label style="display: inline;">											身份证号：										</label>										<input name="cardidname" type="text" maxlength="18" class="text-input"/>										<br/><br/>										<label style="display: inline;">											身份证正面：										</label>																				<input id="cardpicid" name="file" type="file" />										<label style="display: inline;">											身份证反面：										</label>																				<input id="cardpicidother" name="fileother" type="file" />																				<br/>										注意：支持JPG，PNG，BMP等图片格式的身体证图片，最大不超过4MB<br>										<span id="card_file"></span>										<input name="old_file" type="hidden" />																				<input type="text"												name="idurlcard" style="width:120px;display:none;" />																																<span id="showcardpicid" style="display:none;">											身份证图片正面预览:<a href="" target="_blank" id="imacardurlid"><img width="150px" height="150px" src=""></a>																					</span>																				<input type="text"												name="idurlcardother" style="width:120px;display:none;" />																																<span id="showcardpicidother" style="display:none;">											身份证图片反面预览:<a href="" target="_blank" id="imacardurlidother"><img width="150px" height="150px" src=""></a>																					</span>										<input type="text"												name="idurlcardtogether" style="width:120px;display:none;" />										 <hr/>																				<input id="add_consignee_bt" class="button" type="button"									value="保存该地址到我的收货人" onClick="zengjiadizi()"/>																			<!-- <input id="update_consignee_bt" class="button" type="button"									value="更新地址" /> -->					 														</div>									<!-- </form> -->								</td>							</tr>						</table>						<hr />						<label style="margin-top: 20px;">							<h4>								选择渠道							</h4>						</label>						<select class="text-input" name="cid" onChange="loadCommoditySelectOption()">						</select>						<span >&nbsp;&nbsp;渠道附加费</span>						<input type="text" name="addtivePrice" style="width:60px" class="text-input" readonly="readonly"/>						<br/>						<label style="margin-top: 20px;">储藏间	</label>						<!-- <input type="text" class="text-input" id="storageName" onchange="javascript: checkStoragePositionByUser();"> -->						<select class="text-input" id="storageName" onchange="javascript: checkStoragePositionByUser();"></select>						<!-- <input type="text" style="display: none;" id="storagePositionId" name="storagePositionId" readonly> -->						<input type="hidden" id="storagePositionId" name="storagePositionId" >						<input type="number" style="width: 60px;" id="storagePositionRowNumber" min="0" step="1" onchange="javascript: checkStoragePositionByUser();">行;						<input type="number" style="width: 60px;" id="storagePositionColNumber" min="0" step="1" onchange="javascript: checkStoragePositionByUser();">列;						<label id="storagePositionSuggestion" style="display: inline; color: #d77;"></label>						<hr />						<label style="margin-top: 20px;">							<h4>								运单商品信息							</h4>						</label>						<div id="commodify_infos">							<p>								<label style="display: inline;">									商品类型：								</label>								<select name="commodityName"									style="width: 100px; margin-right: 20px;" class="text-input">																	</select>								<label style="display: inline;">									商品数量：								</label>								<input value="1" name="commodifyQuantity" type="text"									class="text-input"style="width:70px" />									<label style="display: inline;">包裹详情：</label>									<input type="text" name="commodifyxiangqing" placeholder="填写具体物品信息" style="width:120px" class="text-input"/>									<label style="display: inline;">品牌：</label>									<input type="text" name="commodifybrands" placeholder="填写具体物品品牌" style="width:120px" class="text-input"/>																		<label style="display: inline;">实际重量：</label> 									<input  name="jwweight" type="text" style="width:70px" class="text-input" placeholder="不为空" value="0"/>									<label style="display: inline;">计费重量：</label> 									<input  name="sjweight" type="text" style="width:70px" class="text-input" readonly="readonly" value="0"/>																		<!-- <label style="display: inline;">计费重量：</label>									<input  name="jfweight" placeholder="不为空"style="width:70px" class="text-input"/> -->								<a href="#" id="a_add_commodify_info">添加</a>							</p>													</div>						<hr />						<fieldset>							<div id="order_info">								<p>									<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重量：									</label>									<input class="text-input" size="15" type="text" name="weight"										value="0" maxlength="10"/>									<small>磅</small>																											<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;重量(Kg)：									</label>									<input class="text-input" size="15" type="text" name="weightKg"										value="0" maxlength="10"/>									<small>Kg</small>																		<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;实际重量：									</label>									<input class="text-input" size="15" type="text" name="sum_weight"										value="0" maxlength="10"/>									<small>磅</small>																		</p>									<p>									<label style="display: inline;">										&nbsp;&nbsp;包裹长度：									</label>									<input class="text-input" size="15" type="text" name="length"										value="0" maxlength="10"/>									<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;包裹宽度：									</label>									<input class="text-input" size="15" type="text" name="width"										value="0" maxlength="10"/>									<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;包裹高度：									</label>									<input class="text-input" size="15" type="text" name="height"										value="0" maxlength="10"/>																	</p>								<p>									<label style="display: inline;">										&nbsp;&nbsp;保险费：									</label>									<input type="text" class="text-input" size="15" value="0"										name="premium" maxlength="10"/>									<small>美元</small>																		<label style="display: inline;">										&nbsp;&nbsp; 保险额度：									</label>									<input type="text" class="text-input" size="15" value="0"										name="premiumtotal" maxlength="10" readonly= "true" />									<small>美元</small>									</p>								<p>									<!-- <label style="display: inline;">										OR转运费：									</label>									<input class="text-input" size="15" type="text" name="or"										value="0" maxlength="6"/>									<small>美元</small> -->									<label style="display: inline;">										其他费用：									</label>									<input class="text-input" size="15" type="text" name="other"										value="0" maxlength="10"/>									<small>美元</small>																		<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关税：									</label>									<input class="text-input" size="15" type="text" name="tariff"										value="0" maxlength="10"/>									<small>美元</small>																		<label style="display: inline;">										&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;申报价值：									</label>									<input class="text-input" size="15" type="text" name="parceValue"										value="0" maxlength="10"/>									<small>美元</small>																										</p>								<p>									<label style="display: none;" >										邮寄方式：									</label>									<select class="text-input" name="mail" onChange="msOrderCalcFreight()" style="display:none;">										<option value="0" selected="selected">											邮包										</option>										<option value="1">											电商										</option>										<option value="2">											快件										</option>									</select>																											<!--  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;   --> 																		<label style="display: inline;">											&nbsp;&nbsp;&nbsp;总费用：									</label>									<input  class="text-input" size="15" type="text" name="totalmoney" placeholder="0.00" disabled="disabled" />								</p>								<p>									<label style="display: inline;">										备注信息：									</label>									<textarea rows="2" cols="20" class="text-input" name="remark"maxlength="100"></textarea>								</p>								<hr />							</div>							<p style="margin-left: 50px;">								<input id="add_msj_order_bt" class="button" type="submit"									value="提交" />&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;font-size:10px;">弹出新窗口</span>									<input type="checkbox" name="submitopentype" id="submitopentype" value="">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:green;font-size:10px;">支付成功自动打印</span>									<input type="checkbox" name="paysuccessprint" id="paysuccessprint" value="">							</p>						</fieldset>						<div class="clear"></div>						<!-- End .clear -->					 </form>				</div>			</div>		</div>      	</div>      	<!-- 不要删除这个div -->      	<div id="tmpmsgdiv1" style="display:none;">      	</div>	</body>	<script type="text/javascript">	$("#main-content").ready(function() {				loadNav542Data();		showLocation();			});		$("#a_add_user_link").click(function() {		$("#main-content").load(admin_add_user_page_url);		return false;	});				function zengjiadizi(){		var picValue = $(":file[name='file']").val();//身份证正面图片		var picValueother = $(":file[name='fileother']").val();//身份证反面图片		if ((picValue == null || "" == picValue)&&(picValueother == null || "" == picValueother)) {			savenopic();		} else {//至少有一个包含图片			savehavepic();		}		return false;	}		function savenopic() {		var userId = $(":radio[name='userId']:checked").val();		var cName = $(":text[name='cName']").val();				var cProvince="";		var cCity="";		var cDistrict="";		var from_user_name=$(":text[name='from_user_name']").val();		var from_user_real_name=$(":text[name='from_user_real_name']").val();		var validate = true;		var userId = $(":radio[name='userId']:checked").val();				if($("#use_pct").is(':checked')==true)//禁止使用		{				}		else		{			cProvince = $("#loc_province option:checked").text();			cCity = $("#loc_city option:checked").text();			cDistrict = $("#loc_town option:checked").text();			if(cProvince=="省份"){				$("#loc_province").css({ "border-color": "red" });				$("#loc_province").change(function(){					if($("#loc_province").val()!=null)						$("#loc_province").css({ "border-color": "" });				});				validate = false;			}			if(cCity=="地级市"){				$("#loc_city").css({ "border-color": "red" });				$("#loc_city").change(function(){					if($("#loc_city").val()!=null)						$("#loc_city").css({ "border-color": "" });				});				validate = false;			}			if(cDistrict=="市、县、区"){				$("#loc_town").css({ "border-color": "red" });				$("#loc_town").change(function(){					if($("#loc_town").val()!=null)						$("#loc_town").css({ "border-color": "" });				});				validate = false;			}		}				var cStreetAddress = $(":text[name='cStreetAddress']").val();		var cZipCode = $(":text[name='cZipCode']").val();		var cPhone = $(":text[name='cPhone']").val();		var cardId = $(":text[name='cardidname']").val();						if (typeof(userId) == "undefined") {			$("#u5402").css({ "border-color": "red" });			$(":radio[name='userId']").change(function(){					$("#u5402").css({ "border-color": "" });			});			validate = false;		}				if(cName==""||cName==null){			$(":text[name='cName']").css({ "border-color": "red" });			$(":text[name='cName']").change(function(){				if($(":text[name='cName']").val()!=null)					$(":text[name='cName']").css({ "border-color": "" });			});			validate = false;		}								if(cStreetAddress==""||cStreetAddress==null){			$(":text[name='cStreetAddress']").css({ "border-color": "red" });			$(":text[name='cStreetAddress']").change(function(){				if($(":text[name='cStreetAddress']").val()!=null)					$(":text[name='cStreetAddress']").css({ "border-color": "" });			});			validate = false;		}				/*if(cZipCode==""||cZipCode==null){			$(":text[name='cZipCode']").css({ "border-color": "red" });			$(":text[name='cZipCode']").change(function(){				if($(":text[name='cZipCode']").val()!=null)					$(":text[name='cZipCode']").css({ "border-color": "" });			});			validate = false;		}*/		if(cPhone==""||cPhone==null){			$(":text[name='cPhone']").css({ "border-color": "red" });			$(":text[name='cPhone']").change(function(){				if($(":text[name='cPhone']").val()!=null)					$(":text[name='cPhone']").css({ "border-color": "" });			});			validate = false;		}				if(!validate){			alert("红色框中的信息必须正确填写，才可以保存地址！");			return;		}		$.ajax({			type:"post",			url:admin_consignee_add_no_pic,			data:{				//"id":userId,				"id":userId,				"from_user_name":from_user_name,				"from_user_real_name":from_user_real_name,				"name":cName,				"province":cProvince,				"city":cCity,				"dist":cDistrict,				"sadd":cStreetAddress,				"phone":cPhone,				"zcode":cZipCode,				"cid":cardId			},			success:function(response) {				var code = response.code;				if (code == "200") {					alert("添加成功");										//window.close();					//window.location.href = "zhengjiadizi.jsp";				} else if ("607" == code) {					alert("请登录");					window.location.href = "login.jsp";				} else {					// 失败					alert("添加失败，原因是:" + response.message);				}			}		});		return false;	}		function savehavepic() {		$(":hidden[name='cUserId']").val($(":radio[name='userId']:checked").val());												var cProvince="";		var cCity="";		var cDistrict="";		var validate = true;		if($("#use_pct").is(':checked')==true)//禁止使用		{				}		else		{			cProvince = $("#loc_province option:checked").text();			cCity = $("#loc_city option:checked").text();			cDistrict = $("#loc_town option:checked").text();			if(cProvince=="省份"){				$("#loc_province").css({ "border-color": "red" });				$("#loc_province").change(function(){					if($("#loc_province").val()!=null)						$("#loc_province").css({ "border-color": "" });				});				validate = false;			}			if(cCity=="地级市"){				$("#loc_city").css({ "border-color": "red" });				$("#loc_city").change(function(){					if($("#loc_city").val()!=null)						$("#loc_city").css({ "border-color": "" });				});				validate = false;			}			if(cDistrict=="市、县、区"){				$("#loc_town").css({ "border-color": "red" });				$("#loc_town").change(function(){					if($("#loc_town").val()!=null)						$("#loc_town").css({ "border-color": "" });				});				validate = false;			}		}										if($("#use_pct").is(':checked')==true)//禁止使用		{			$(":hidden[name='cProvince']").val("");			$(":hidden[name='cCity']").val("");			$(":hidden[name='cDistrict']").val("");		}		else		{			$(":hidden[name='cProvince']").val($("#loc_province option:checked").text());			$(":hidden[name='cCity']").val($("#loc_city option:checked").text());			$(":hidden[name='cDistrict']").val($("#loc_town option:checked").text());		}				if(!validate){			alert("红色框中的信息必须正确填写，才可以保存地址！");			return;		}				$("#add_form").ajaxSubmit( {			type : "post",			url : admin_consignee_add,			success : function(data) {				$("#tmpmsgdiv").html(data);				var str = $("#tmpmsgdiv pre").html();				var obj = $.parseJSON(str);				var code = obj.code;				if (code == "200") {					alert("添加成功");					//window.close();					//window.location.href = "zhengjiadizi.jsp";				} else if (code == "607") {					alert("您尚未登录或登录已失效！");					logout();				} else {					alert("添加收件人失败，原因是:" + obj.message);				}				return false;			},			error : function(XmlHttpRequest, textStatus, errorThrown) {				alert("操作失败");				return false;			}		});	}				/**	 * Created by chenkanghua on 2015/5/27.	 * phone 15818853022	 * qq 846645133   	 */		function addUserDlg(key) {	    var msgw, msgh, msgbg, msgcolor, bordercolor, titlecolor, titlebg, con;	    con ="";	    con +='<div id="add_user">';  	    con +='<form action="" onsubmit="return false;" style="width: 300px;margin-left: 130px;">';	            //con +='<p><label style="display: inline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Email：</label> <input class="text-input" type="text" name="email" maxlength="36"/> <span class="gl_message">*</span> </p>';        //con +='<p><label style="display: inline;">&nbsp;&nbsp;&nbsp;&nbsp;用户名：</label><input class="text-input" type="text" name="name" maxlength="16"/></p>';        //con +='<p><label style="display: inline;">登录密码：</label> <input class="text-input" type="password" name="password" maxlength="16"/> <span class="gl_message">*</span> </p>';        con +='<p><label style="display: inline;">真实姓名：</label><input class="text-input" type="text" name="realName" maxlength="50"/></p>';        con +='<p><label style="display: inline;">联系电话：</label><input class="text-input" type="text" name="phone" maxlength="20" value="'+key+'"/></p>';        //con +='<p><label style="display: inline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QQ：</label><input class="text-input" type="text" name="qq" maxlength="16"/></p>';        //con +='<p><label style="display: inline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;国 家：</label><input class="text-input" type="text" name="country"maxlength="10"/></p>';        //con +='<p><label style="display: inline;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;地址：</label><input class="text-input" type="text" name="address"maxlength="76"/></p>';        con +='<p><label style="display: inline;">用户类型：</label><select name="type">';        con +='<option value="0">普通会员</option><option value="1" selected="selected">门市会员</option><option value="2">VIP会员</option><option value="3">VIP2会员</option><option value="4">VIP3会员</option>';        con +='</select></p>';        con +='<p><span>默认密码为：111111</span></p>';        con +='<p style="margin-left: 50px;"><input class="button" type="submit" name="bt_add_user" id="bt_add_user" value="提交" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input class="button" type="button" onclick="CloseMsg()" value="取消"></p>';        con +='</form></div>';	    //弹出窗口设置	    msgw = 510;   //窗口宽度	    msgh = 400;   //窗口高度	    msgbg = "#FFF";    //内容背景	    msgcolor = "#000";   //内容颜色	    bordercolor = "#000"; //边框颜色	    titlecolor = "#FFF"; //标题颜色	    titlebg = "#369";   //标题背景	    //遮罩背景设置	    var sWidth, sHeight;	    sWidth = screen.availWidth;	    sHeight = document.body.scrollHeight;	    //创建遮罩背景	    var maskObj = document.createElement("div");	    maskObj.setAttribute('id', 'maskdiv');	    maskObj.style.position = "absolute";	    maskObj.style.top = "0";	    maskObj.style.left = "0";	    maskObj.style.background = "#777";	    maskObj.style.filter = "Alpha(opacity=30);";	    maskObj.style.opacity = "0.3";	    maskObj.style.width = sWidth + "px";	    maskObj.style.height = sHeight + "px";	    maskObj.style.zIndex = "10000";	    document.body.appendChild(maskObj);	    //创建弹出窗口	    var msgObj = document.createElement("div");	    msgObj.setAttribute("id", "msgdiv");	    msgObj.style.position = "absolute";	    msgObj.style.top = (screen.availHeight - msgh) / 4 + "px";	    msgObj.style.left = (screen.availWidth - msgw) / 2 + "px";	    //msgObj.style.top = (screen.availHeight - msgh) / 4 + "px";	    //msgObj.style.left = (screen.availWidth - msgw) / 2 + "px";	    msgObj.style.width = msgw + "px";	    msgObj.style.height = msgh + "px";	    msgObj.style.fontSize = "12px";	    msgObj.style.background = msgbg;	    msgObj.style.border = "1px solid " + bordercolor;	    msgObj.style.zIndex = "10001";	    //创建标题	    var thObj = document.createElement("div");	    thObj.setAttribute("id", "msgth");	    thObj.className = "DragAble";	    thObj.style.cursor = "move";	    thObj.style.padding = "10px 6px";			    thObj.style.color = titlecolor;	    thObj.style.background = titlebg;	    var titleStr = "<a title='Close' style='cursor:pointer;float:right;cursor:default;color: #FFF000' onclick='CloseMsg()'>取消</a>" + "<span>增加寄件人</span>";	    thObj.innerHTML = titleStr;	    //创建内容	    var bodyObj = document.createElement("div");	    bodyObj.setAttribute("id", "msgbody");	    bodyObj.style.padding = "10px";	    bodyObj.style.lineHeight = "1.5em";	    bodyObj.innerHTML = con;	    //var txt = document.createTextNode(content)	    //bodyObj.appendChild(txt);	    //生成窗口	    document.body.appendChild(msgObj);	    document.getElementById("msgdiv").appendChild(thObj);	    document.getElementById("msgdiv").appendChild(bodyObj);	    	    $("#bt_add_user").click(function(){	    	var phone = $(":text[name='phone']").val();			var name = phone;//$(":text[name='email']").val();			var password = $(":password[name='password']").val();			var email = "";//$(":text[name='email']").val();			var realName = $(":text[name='realName']").val();			var type = $("select[name='type']").val();			submitAddUser(name, password, email, realName, phone, "", "","", type);		});	    	}		function submitAddUser(name, password, email, realName, phone, qq, country,address, type) {		if (!checkUserPassword(password)) {			alert("密码格式不正确，密码必须由6到20个可见字符组成，请重新输入！");		} else if (!email==""&&!checkUserEmailRegex(email)) {			alert("邮箱格式不正确，请重新输入！");		} else if (!checkUserRealName(realName)) {			alert("真实姓名格式不正确，最长长度为20个字符，请重新输入！");		} else if (!checkUserPhone(phone)) {			alert("手机号码格式不正确，最长长度为20个字符，请重新输入！");		} else if (!checkUserQQ(qq)) {			alert("qq号码格式不正确，qq号码必须由数字组成，最长长度为20，请重新输入！");		} else if (!checkUserCountry(country)) {			alert("国家信息格式不正确，国家信息最长为20个字符，请重新输入！");		} else if (!checkUserAddress(address)) {			alert("地址信息格式不正确，地址信息最长为150个字符，请重新输入！");		} else {			$("#bt_add_user").attr("disabled", true);			$.ajax( {				type : "post",				//url : admin_add_user_url,				url : admin_add_msuser_url,				data : {					"name" : name,					"email" : email,					"password" : password,					"realName" : realName,					"phone" : phone,					"qq" : qq,					"country" : country,					"address":address,					"type" : type				},				success : function(response) {					$("#bt_add_user").attr("disabled", false);					var code = response.code;					if ("200" == code) {						alert("添加成功");						CloseMsg();						$(":text[name='key']").val(phone);						$("#searchBt").click();  					} else if ("607" == code) {						alert("您尚未登录或登录已失效！");						logout();					} else {						alert("添加会员失败，失败原因:" + response.message);					}					return false;				}			});		}		return false;	}	function CloseMsg() {	    //移除对象	    document.body.removeChild(document.getElementById("maskdiv"));	    document.getElementById("msgdiv").removeChild(document.getElementById("msgth"));	    document.getElementById("msgdiv").removeChild(document.getElementById("msgbody"));	    document.body.removeChild(document.getElementById("msgdiv"));	}	//拖动窗口	var ie = document.all;	var nn6 = document.getElementById && !document.all;	var isdrag = false;	var y, x;	var oDragObj;	function moveMouse(e) {	    if (isdrag) {	        oDragObj.style.top = (nn6 ? nTY + e.clientY - y : nTY + event.clientY - y) + "px";	        oDragObj.style.left = (nn6 ? nTX + e.clientX - x : nTX + event.clientX - x) + "px";	        return false;	    }	}	function initDrag(e) {	    var oDragHandle = nn6 ? e.target : event.srcElement;	    var topElement = "HTML";	    while (oDragHandle.tagName != topElement && oDragHandle.className != "DragAble") {	        oDragHandle = nn6 ? oDragHandle.parentNode : oDragHandle.parentElement;	    }	    if (oDragHandle.className == "DragAble") {	        isdrag = true;	        oDragObj = oDragHandle.parentNode;	        nTY = parseInt(oDragObj.style.top);	        y = nn6 ? e.clientY : event.clientY;	        nTX = parseInt(oDragObj.style.left);	        x = nn6 ? e.clientX : event.clientX;	        document.onmousemove = moveMouse;	        return false;	    }	}	document.onmousedown = initDrag;	document.onmouseup = new Function("isdrag=false");			function findEmptyStoragePosition(){		var cid = $("select[name='cid']").val();				//alert(cid);		$.ajax({			post : "get",			url : "../admin/storagePosition/findEmptyStoragePositionByOrderType",			data : {				typeRelateId : $("select[name='cid']").val(),				warehouseId : $("select[name='warehouse']").val(),				userId : $("#u_id").html(),			},			success : function(response) {				var code = response.code;				if ("200" == code) {					$("#storagePositionSuggestion").html("");					$("#storageName").prop("disabled",false);					$("#storagePositionColNumber").prop("readOnly",false);					$("#storagePositionRowNumber").prop("readOnly",false);					if(response.data == null){						document.getElementById("storagePositionId").value = "";					}else{						console.log(" response.data.id:"+ response.data.id);						document.getElementById("storagePositionId").value = response.data.id;						//document.getElementById("storageName").value = response.data.storageName;						var sel = document.getElementById('storageName');						sel.options.add(new Option(response.data.storageName,response.data.id));						document.getElementById("storagePositionColNumber").value = response.data.colNumber;						document.getElementById("storagePositionRowNumber").value = response.data.rowNumber;						console.log("storagePositionId::"+$("#storagePositionId").val());					}					return false;				}else if(null != cid && "600" == code){					//$("#storageName").val("");					$("#storageName").empty();					$("#storagePositionColNumber").val("");					$("#storagePositionRowNumber").val("");					$("#storagePositionSuggestion").html("获取不到储藏间，请查看此渠道储藏间是否存在");									}else if("31011" == code){					$("#storageName").empty().prop("disabled",true);					$("#storagePositionColNumber").val("").prop("readOnly",true);					$("#storagePositionRowNumber").val("").prop("readOnly",true);					$("#storagePositionSuggestion").html(response.message);									} else if ("607" == code) {					alert("您尚未登录或登录已失效！");					logout();				};			}		});	}	function findStorage4User(){		$.ajax({			type : "post",			url : "../admin/storagePosition/findStoragePosition4UserByOrderType",			data : {				warehouseId : $("select[name='warehouse']").val(),//warehouseId				typeRelateId : $("select[name='cid']").val(),				userId : $(":radio:checked").val()			},			success : function(response) {				var code = response.code;				if ("200" == code) {					$("#storagePositionId").val(response.data.id);					$("#storageName").val(response.data.storageName);					$("#storagePositionColNumber").val(response.data.colNumber);					$("#storagePositionRowNumber").val(response.data.rowNumber);				} else {					$("#storagePositionId").val("");					$("#storageName").val("");					$("#storagePositionColNumber").val("");					$("#storagePositionRowNumber").val("");				}				return false;			}		});	}	function checkStoragePositionByUser(){		$.ajax({			post : "get",			url : "../admin/storagePosition/checkStoragePosition4User",			data : {				userId : $(":radio:checked").val(),				storageName : $("#storageName").val(),				colNumber : $("#storagePositionColNumber").val(),				rowNumber : $("#storagePositionRowNumber").val()			},			success : function(response) {				var code = response.code;				if ("200" == code) {					if(!response.data){//false, 不可以使用						//document.getElementById("storageName").style.background = "#f77";						//document.getElementById("storagePositionColNumber").style.backgroundColor = "#f77";						//document.getElementById("storagePositionRowNumber").style.backgroundColor = "#f77";						document.getElementById("storagePositionId").value = "";						$.ajax({							post : "get",							url : "../admin/storagePosition/findEmptyStoragePositionByOrderType",							data : {								typeRelateId :$("select[name='cid']").val()							},							success : function(response) {								var code = response.code;								if ("200" == code) {									if(response.data == null){										alert(response.message);									}else{										document.getElementById("storagePositionSuggestion").innerHTML = "建议位置：" + response.data.storageName + "/" + response.data.rowNumber + "/" + response.data.colNumber;									}									return false;								};							}						});					}else{						document.getElementById("storageName").style.background = "inherit";						document.getElementById("storagePositionColNumber").style.backgroundColor = "inherit";						document.getElementById("storagePositionRowNumber").style.backgroundColor = "inherit";						document.getElementById("storagePositionId").value = response.data;						document.getElementById("storagePositionSuggestion").innerHTML = "";					}				} else if ("607" == code) {					alert("您尚未登录或登录已失效！");					logout();				} else{					document.getElementById("storagePositionSuggestion").innerHTML = "";				};			}		});	}</script></html>