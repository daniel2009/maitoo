<%@ page language="java" contentType="text/html; charset=UTF-8"	pageEncoding="UTF-8"%><!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>print</title><link rel="shortcut icon" href="../img/favicon.ico" /></head><body>	<div class="print" style="width=650px;height=978px;color:#000000;">		<div>			<!-- <table  id="print_table1" style="BORDER-BOTTOM: 1px"> -->			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px solid ;width:450px;">				<tr >					<td width=30% style="text-align:center;">					<span						style="font-size:15pt;">美         淘</span><br>					<span						style="font-size:15pt;">标准快件</span></td>					<td width=70% style="text-align:center; margin-bottom:20px">						<div							style="float: center;margin-left: 2px;margin-right: 1px; margin-top: 2px;margin-bottom:2px; width: 100%;">							<img name="barcode" style="height:75px" id="barcode"								src="${pageContext.request.contextPath }/barcode4j/generate?msg=${param.seaorderid }&type=code39&height=12" />								<!-- src="${pageContext.request.contextPath }/barcode/generate?code=${param.seaorderid }" /> -->						</div> <!-- <span style="font-size:18px;margin-bottom:20px;" id="u_orderId"><strong>${param.seaorderid }</strong></span> -->					</td>				</tr>	<tr >					<td width=30% style="text-align:center;">					&nbsp;</td>					<td width=70% style="text-align:center; margin-bottom:0px">						&nbsp;					</td>				</tr>			</table>		</div><br/>		<div style="text-align:center;">			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px solid ;width:450px;">				<tr>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">寄件人：</span><span id="send_name"						style="font-size:12pt;"></span><br>					</td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">邮编：</span><span id="send_zipcode"						style="font-size:12pt;"></span>					</td>				</tr>				<tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">地址：</span><span id="send_address"						style="font-size:12pt;"></span></td>				</tr>				<tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">重量：</span><span id="weightKg"						style="font-size:12pt;"></span></td>				</tr>			</table>		</div><br/>		<div style="text-align:left;">			<TABLE align=center valign=top border=0 bordercolor=#000000				cellSpacing=0 cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px solid ;width:450px;">				<tr>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">收件人：</span><span id="rev_name"						style="font-size:12pt;"></span><br>					</td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">寄达市：</span><span id="rev_city"						style="font-size:12pt;"></span>					</td>				</tr>				<tr>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">电话：</span><span id="rev_phone"						style="font-size:12pt;"></span>					</td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">邮编：</span><span id="rev_zipcode"						style="font-size:12pt;"></span>					</td>				</tr>				<tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">地址：</span><span id="rev_address"						style="font-size:12pt;"></span></td>				</tr>				<tr>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">收件人签名：</span><span						id="rev_name_sign" style="font-size:12pt;"></span><br>					</td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">签收时间：</span><span id="rev_time"						style="font-size:12pt;"></span>					</td>				</tr>			</table>		</div>		<div>			<!-- <table  id="print_table1" style="BORDER-BOTTOM: 1px"> -->			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px;width:450px;">				<tr>					<td width=15% style="text-align:center;"><span						style="font-size:15pt;">订单ID:</span></td>					<td width=85% style="text-align:left;">						<div							style="float: center;margin-left: 2px;margin-right: 1px; margin-top: 10px;margin-bottom:0px; width: 100%;">							 <img name="barcode2" style="height:75px"							 src="${pageContext.request.contextPath }/barcode4j/generate?msg=${param.orderid }&type=code39&height=12" />							 								<!-- src="${pageContext.request.contextPath }/barcode/generate2?code=${param.orderid }" />  -->						</div> <!-- <span style="font-size:18px" id="u_orderId"><strong>${param.orderid }</strong></span> -->					</td>								</tr>			</table>		</div><br/>		<div>			<!-- <table  id="print_table1" style="BORDER-BOTTOM: 1px"> -->			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px solid ;width:450px;">								<tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">内件：</span><span id="commudity_lists"						style="font-size:12pt;"></span></td>				</tr>	<tr>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">寄件人：</span><span id="send_name2"						style="font-size:12pt;"></span><br>					</td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">重量：</span><span id="weightKg2"						style="font-size:12pt;"></span>					</td>				</tr><tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">地址：</span><span id="send_address2"						style="font-size:12pt;"></span></td>				</tr>			</table>		</div><br/>		<div style="text-align:center;">			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 3px solid ;width:450px;">				<tr>					<td width=50% valign=top style="text-align:left;"><span						style="font-size:14pt;">收件人：</span><span id="rev_name2"						style="font-size:12pt;"></span></td>					<td width=50% valign=top style="text-align:left;">						<span style="font-size:14pt;">电话：</span><span						id="rev_phone2" style="font-size:12pt;"></span>					</td>				</tr><tr>					<td colspan=2 style="text-align:left;"><span						style="font-size:14pt;">地址：</span><span id="rev_address2"						style="font-size:12pt;"></span></td>				</tr>			</table>		</div>		<div>			<!-- <table  id="print_table1" style="BORDER-BOTTOM: 1px"> -->			<TABLE align=center border=0 bordercolor=#000000 cellSpacing=0				cellPadding=16				style="BORDER-RIGHT: 1px ; BORDER-TOP: 1px ; BORDER-LEFT:  1px ; BORDER-BOTTOM: 2px ;width:450px;">				<tr>										<td width=70% style="text-align:center;">						<div							style="float: center;margin-left: 2px;margin-right: 1px; margin-top: 10px;margin-bottom:0px; width: 100%;">							<img name="barcode3" style="height:75px" id="barcode3"							src="${pageContext.request.contextPath }/barcode4j/generate?msg=${param.seaorderid}&type=code39&height=12" />														</div><!-- <span style="font-size:18px" id="u_orderId"><strong>${param.seaorderid }</strong></span>  -->					</td>					<td width=30% style="text-align:center;"><span						style="font-size:15pt;">H T Y</span><br>						<span style="font-size:15pt;">U S</span></td>				</tr>			</table>		</div>	</div>	<!-- <div>			<table border=1 id="print_table1">				<tr height="100px">					<td width=35%>						<div							style="float: left;margin-left: 3px;text-align: center;width:98%;">							<div>								<img src="../img/index/logo.png" /> <span>#</span>							</div>						</div></td>					<td width=40% style="text-align: center;"><img name="barcode"						style="width:98%; height:60%;"						src="${pageContext.request.contextPath }/barcode/generate?code=${param.orderId }" />						<span name="order_id" style="font-size:14pt;">&nbsp;</span></td>					<td width=25% style="text-align: center;"><span						style="font-size: 12pt;">626-898-7996 美国</span> <br /> <span						style="font-size: 12pt;">189-1885-3038 中国</span></td>				</tr>			</table> 		</div> -->	<div id="param_div" style="display: none;">		<input type="hidden" value="${param.poid }" name="poid" /> 		 		<!-- <input			type="hidden"			value="${pageContext.request.contextPath }/barcode/generate?code=${param.seaorderid }"			name="barcodeimg" /> -->			 	</div>	<input type="hidden" value="${param.orderid }" name="orderId_or" /></body><script type="text/javascript">	//kai 20150911-1 modify	//js获取项目根路径，如： http://localhost:8083/uimcardprj	base_url_set_has_sub = false;	function getRootPath() {		// 获取当前网址，如： http://localhost:8083/uimcardprj/share/meun.jsp		var curWwwPath = window.document.location.href;		// 获取主机地址之后的目录，如： uimcardprj/share/meun.jsp		var pathName = window.document.location.pathname;		var pos = curWwwPath.indexOf(pathName);		// 获取主机地址，如： http://localhost:8083		var localhostPaht = curWwwPath.substring(0, pos);		// 获取带"/"的项目名，如：/uimcardprj		var projectName = pathName.substring(0,				pathName.substr(1).indexOf('/') + 1);		if (base_url_set_has_sub == true) {			return (localhostPaht + projectName);		} else {			return localhostPaht;		}	}	function removenull(str) {		if ((str == "") || (str == null) || (str == "null")				|| (str == "undefined")) {			return "";		} else {			return str;		}	}	$(document)			.ready(					function() {												var orderid1=$(":hidden[name='orderId_or']").val();						//alert(orderid1);						//再次申请生成条形码，保证能够在打开打印时显示图片						$.ajax({							type : "get",							url : "../barcode4j/generate",							data : {								msg : orderid1,								type:"code39",								height:"12"							},							success : function(response) {								//alert("6565");								setTimeout("printfunction()",500);//							}});						//setTimeout("printfunction()",1000);//																						});		function printfunction()	{				function transformer(value) {			if (value == null || value == '') {				return "&nbsp;";			}			return value;		}		function string2int(value) {			if (value == null || value == '') {				return 0;			}			return parseInt(value);		}				$("#my_print_div")		.ready(				function() {					var id = $(":hidden[name='poid']")							.val();							//alert(id);										$							.ajax({								async : false,								type : "get",								url : admin_seaprint_porder_get_one_url,								data : {									"id" : id								},								success : function(										response) {									var code = response.code;									//alert(code);									if ("200" == code) {										var data = response.data;										var sendcompany=data.sendcompany;										if(removenull(sendcompany)!="")										{											sendcompany=sendcompany.substr(0,15);										}																						 																																$("#send_name").html(transformer(data.sendname));										$("#send_address").html(transformer(data.sendaddress));										$("#send_name").html(transformer(sendcompany));																				$("#weightKg").html(transformer(data.weight));																				$("#rev_name").html(transformer(data.cname));										$("#rev_city").html(transformer(data.ccity));										$("#rev_phone").html(transformer(data.cphone));										var src1=$("#barcode").attr("src");										$("#barcode3").attr("src",src1);																																								var orderId = data.orderId;										if (orderId == null												|| orderId == '') {											orderId = transformer(id);										}										var toAddress = "";										if (removenull(data.cprovince) != "") {											toAddress += transformer(data.cprovince);										}										if (removenull(data.ccity) != "") {											toAddress += transformer(data.ccity);										}										if (removenull(data.cdist) != "") {											toAddress += transformer(data.cdist);										}										toAddress += transformer(data.caddress);										$("#rev_address").html(toAddress);																				$("#commudity_lists").html(data.commuditylists);																				//send_name2										$("#send_name2").html(transformer(sendcompany));										$("#weightKg2").html(data.weight);										$("#send_address2").html(data.sendaddress);										$("#rev_name2").html(data.cname);										$("#rev_phone2").html(data.cphone);										$("#rev_address2").html(toAddress);																				$(document).ready(function() {											setTimeout(window.print(), 1000);																																	$											.ajax({												type : "get",												url : "../admin/seaprint/modify_porder_state",												data : {													"id" : id												},												success : function(														response) {													var code = response.code;													//alert(code);													if ("200" == code) {																											}													else													{																											}													}});																																													});																		} else {										alert("获取运单信息失败，无法打印运单！");									}									return false;								}							});				});	}	</script></html>