<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->

    <title>美淘转运(MEITAO EXPRESS MAIL) - 准时、高效、经济的帮您转运个人物品到中国！</title>
    <link href="../favicon.ico" rel="shortcut icon" type="image/x-icon">


    <script type="text/javascript" src="../resources/admin/validation.js"></script>

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="../resources/ace/css/ace-part2.min.css" class="ace-main-stylesheet" />
    <![endif]-->
    <!--[if lte IE 9]>
        <link rel="stylesheet" href="../resources/ace/css/ace-ie.min.css" />
    <![endif]-->
    <!-- 最后引入基本样式 -->
    <link rel="stylesheet" href="../resources/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../resources/bootstrap/css/font-awesome.min.css">

    <!-- 文本字体 -->
    <link rel="stylesheet" href="../resources/ace/css/ace-fonts.min.css">
    <!-- ace 样式 -->
    <link rel="stylesheet" href="../resources/ace/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style">

</head>
<body class="login-layout blur-login">
    <div class="main-container">
        <div class="main-content">
            <div class="row">
                <div class="col-sm-10 col-sm-offset-1">
                    <div class="login-container">
                        <div class="center">
                            <h4 class="blue" id="id-company-text">&nbsp;</h4>

                        </div>

                        <div class="space-6"></div>

                        <div class="position-relative">
                         
                            <div id="forgot-box" class="forgot-box widget-box no-border visible">
                                <div class="widget-body">

                                    <div class="tabbable">
                                        <ul class="nav nav-tabs" id="myTab">
                                            <li class="active">
                                                <a data-toggle="tab" href="#home">
                                                    <i class="green icon-home bigger-110"></i>
                                                    手机找回密码
                                                </a>
                                            </li>

                                            <li class="">
                                                <a data-toggle="tab" href="#profile">
                                                    <i class="green icon-home bigger-110"></i>
                                                    邮箱找回密码

                                                </a>
                                            </li>


                                        </ul>

                                        <div class="tab-content">
                                            <div id="home" class="tab-pane active">
                                                <div class="widget-main">
                                                    <h4 class="header red lighter bigger">
                                                        <i class="ace-icon fa fa-key"></i>
                                                        手机取回密码
                                                    </h4>



                                                    <fieldset>
                                                        <label class="block clearfix">
                                                            <span class="block input-icon input-icon-right">
                                                                <input name="phone" type="text" class="form-control" placeholder="请填写手机号码" style="width:150px;display:inline-block" id="tel_telphone">

                                                                <!--<span  style="vertical-align:top; margin:0px; margin-left:10px;cursor:pointer;background:#ff8840;color:#fff; height:33px; width:100px; display:inline-block; line-height:22px; padding:5px 10px;" id="code" >获取验证码</span>-->

                                                                <button type="button" class="width-35 pull-right btn btn-sm btn-primary" onclick="getValidateCode()">

                                                                    <span class="bigger-110">获取验证码</span>
                                                                </button>
                                                            </span>
                                                        </label>
                                                        <label class="block clearfix">
                                                            <span class="block input-icon input-icon-right">
                                                                <input type="text" id="tel_verifycode" class="form-control" name="text" placeholder="请输入手机收到的验证码">
                                                                <i class="ace-icon fa fa-envelope"></i>
                                                            </span>
                                                        </label>
                                                        <label class="block clearfix">
                                                            <span class="block input-icon input-icon-right">
                                                                <input name="password" type="password" class="form-control" placeholder="请输入新密码(6-20位)" id="tel_password">
                                                                <i class="ace-icon fa fa-lock"></i><span class="field-validation-valid" data-valmsg-for="password" data-valmsg-replace="true"></span>
                                                            </span>
                                                        </label>
                                                        <div class="clearfix">
                                                            <button type="button" class="width-35 pull-right btn btn-sm btn-danger" onclick="resetpwd()">
                                                                <i class="ace-icon fa fa-lightbulb-o"></i>
                                                                <span class="bigger-110">找回密码</span>
                                                            </button>
                                                        </div>
                                                    </fieldset>

                                                </div>
                                            </div>

                                            <div id="profile" class="tab-pane">
                                                <div class="widget-main">
                                                    <h4 class="header red lighter bigger">
                                                        <i class="ace-icon fa fa-key"></i>
                                                        邮箱取回密码
                                                    </h4>

                                                    <fieldset>
                                                        <label class="block clearfix">
                                                            <span class="block input-icon input-icon-right">
                                                                <input type="email" class="form-control" name="email" id="email" placeholder="请输入邮箱地址">
                                                                <i class="ace-icon fa fa-envelope"></i>
                                                            </span>
                                                        </label>

                                                        <label class="block clearfix">
                                                            <span class="block input-icon input-icon-right">
                                                                <input name="checkcode" type="text" class="form-control" placeholder="请填写验证码" style="width:150px;display:inline-block" id="verifycode">

                                                                <img src="/code/generate" width="100" height="33" style="vertical-align:top; margin:0px; margin-left:10px; display:inline-block" onclick="resetValidateCode(this)">
                                                            </span>
                                                        </label>

                                                        <div class="clearfix">
                                                            <div class="space-6"></div>

                                                            <button type="button" class="width-35 pull-right btn btn-sm btn-danger" onclick="resetpwdByEmail()">
                                                                <i class="ace-icon fa fa-lightbulb-o"></i>
                                                                <span class="bigger-110">找回密码</span>
                                                            </button>
                                                        </div>
                                                    </fieldset>

                                                </div>
                                            </div>

                                        </div>
                                    </div>

                                    <!-- /.widget-main -->

                                    <div class="toolbar center">
                                        <a href="login.html"  class="back-to-login-link">
                                            回到登录
                                            <i class="ace-icon fa fa-arrow-right"></i>
                                        </a>
                                    </div>
                                </div><!-- /.widget-body -->
                            </div><!-- /.forgot-box -->

                            <div id="signup-box" class="signup-box widget-box no-border">
                                <div class="widget-body">
                                    <div class="widget-main">
                                        <h4 class="header green lighter bigger">
                                            <i class="ace-icon fa fa-users blue"></i>
                                            新用户注册
                                        </h4>

                                        <div class="space-6"></div>
                                        <p> 输入你的信息 </p>

                                        <form action="/Admin/User/Register" method="post">
                                            <fieldset>
                                                <label class="block clearfix">
                                                    <span class="block input-icon input-icon-right">
                                                        <input type="email" class="form-control" name="email" placeholder="Email">
                                                        <i class="ace-icon fa fa-envelope"></i>
                                                    </span>
                                                </label>

                                                <label class="block clearfix">
                                                    <span class="block input-icon input-icon-right">
                                                        <input type="text" class="form-control" name="username" placeholder="用户名">
                                                        <i class="ace-icon fa fa-user"></i>
                                                    </span>
                                                </label>

                                                <label class="block clearfix">
                                                    <span class="block input-icon input-icon-right">
                                                        <input type="password" class="form-control" name="password" placeholder="密码">
                                                        <i class="ace-icon fa fa-lock"></i>
                                                    </span>
                                                </label>

                                                <label class="block clearfix">
                                                    <span class="block input-icon input-icon-right">
                                                        <input type="password" class="form-control" name="password2" placeholder="重复密码">
                                                        <i class="ace-icon fa fa-retweet"></i>
                                                    </span>
                                                </label>

                                                <label class="block">
                                                    <input type="checkbox" class="ace">
                                                    <span class="lbl">
                                                        我接受
                                                        <a href="#">用户协议</a>
                                                    </span>
                                                </label>

                                                <div class="space-24"></div>

                                                <div class="clearfix">
                                                    <button type="reset" class="width-30 pull-left btn btn-sm">
                                                        <i class="ace-icon fa fa-refresh"></i>
                                                        <span class="bigger-110">重置</span>
                                                    </button>

                                                    <button type="submit" class="width-65 pull-right btn btn-sm btn-success">
                                                        <span class="bigger-110">注册</span>

                                                        <i class="ace-icon fa fa-arrow-right icon-on-right"></i>
                                                    </button>
                                                </div>
                                            </fieldset>
                                        </form>
                                    </div>

                                    <div class="toolbar center">
                                        <a href="#" data-target="#login-box" class="back-to-login-link">
                                            <i class="ace-icon fa fa-arrow-left"></i>
                                            回到登录
                                        </a>
                                    </div>
                                </div><!-- /.widget-body -->
                            </div><!-- /.signup-box -->
                        </div><!-- /.position-relative -->

                        <div class="navbar-fixed-top align-right">
                            <br>
                            &nbsp;
                            <a id="btn-login-dark" href="#">暗黑</a>
                            &nbsp;
                            <span class="blue">/</span>
                            &nbsp;
                            <a id="btn-login-blur" href="#">蓝色</a>
                            &nbsp;
                            <span class="blue">/</span>
                            &nbsp;
                            <a id="btn-login-light" href="#">明亮</a>
                            &nbsp; &nbsp; &nbsp;
                        </div>
                    </div>
                </div><!-- /.col -->
            </div><!-- /.row -->
        </div><!-- /.main-content -->
    </div><!-- /.main-container -->
    <!-- JQuery作为一等公民，页面内部随时可能使用 -->
    <script src="../resources/js/jquery-1.10.2.min.js"></script>
    <!-- 最早引入基本脚本 -->
    <script src="../resources/bootstrap/js/bootstrap.min.js"></script>
    <script src="../resources/js/jquery-ui.custom.min.js"></script>
    <script src="../resources/js/jquery.ui.touch-punch.min.js"></script>

    
    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->
    <!--[if lte IE 8]>
    <script src="../resources/js/html5shiv.min.js"></script>
    <script src="../resources/js/respond.min.js"></script>
    <![endif]-->
    <!-- inline scripts related to this page -->
    <script type="text/javascript">
       

        //you don't need this, just used for changing background
        jQuery(function ($) {
            $('#btn-login-dark').on('click', function (e) {
                $('body').attr('class', 'login-layout');
                $('#id-text2').attr('class', 'white');
                $('#id-company-text').attr('class', 'blue');

                e.preventDefault();
            });
            $('#btn-login-light').on('click', function (e) {
                $('body').attr('class', 'login-layout light-login');
                $('#id-text2').attr('class', 'grey');
                $('#id-company-text').attr('class', 'blue');

                e.preventDefault();
            });
            $('#btn-login-blur').on('click', function (e) {
                $('body').attr('class', 'login-layout blur-login');
                $('#id-text2').attr('class', 'white');
                $('#id-company-text').attr('class', 'light-blue');

                e.preventDefault();
            });

        });



        function resetpwd() {
            var vcode = $("#tel_verifycode").val();//verifycode
            var telphone = $("#tel_telphone").val();
            var password = $("#tel_password").val();


            $.ajax({
                type: "get",
                url: "/user/reset_pwd",
                data: {
                    "password": password,
                    "phone": telphone,
                    "vcode": vcode
                },
                success: function (response) {
                    var code = response.code;
                    if (code == "200") {
                        alert("重设密码成功！，你可以使用新密码登录");

                        //window.location.href = "fleet/login.jsp";
                        window.location.href = "index.html";
                    } else {
                        alert("找回密码失败，失败原因是:" + response.message);
                    }
                }
            });
        }


        function resetValidateCode(event) {
            $(event).attr('src', '/code/generate?timestamp=' + new Date().getTime());
        }

        function getValidateCode() {
            var telphone = $("#tel_telphone").val();

            $.ajax({
                type: "post",
                url: "/code/phone",
                data: {
                    "phone": telphone
                },
                success: function (response) {
                    var code = response.code;
                    if (code == "200") {
                        alert("发送成功，请查看手机收到的验证码");
                    }
                }
            });
        }


        function validaVerifycode(verifycode) {
            if (verifycode.length != 6) {
                alert("验证码长度不对,请输入正确的验证码.");
                return false;
            }
            return true;
        }


        function resetpwdByEmail() {
            var email = $("#email").val();
            var code = $("#verifycode").val();

            $.ajax({
                type: "get",
                url: "/user/reset_email_pwd",
                data: {
                    "email": email,
                    "vcode": code
                },
                success: function (response) {
                    var code = response.code;
                    if (code == "200") {
                        alert("亲爱的用户您好，您的验证信息已经发送到您的邮箱请登陆邮箱查看！");
                    } else {
                        alert("发送邮件，失败原因是:" + response.message + "请重试！");
                    }
                }
            });
        }

    </script>

</body>
</html>